UNDER DEVELOPMENT - DON'T USE YET

#!/bin/sh -e
#
# This script illustrates how to update u-boot to either the latest or some
# specific upstream and OpenMoko version. This is mainly intended as a template
# for copy & paste, and as an example for individual scripts.
#
# See README for the toolchain and "build" for environment variables.
#

cd u-boot

# If there are uncommitted changes, "quilt refresh" them first.
# If any of the repositories has been updated before running this script,
# "quilt pop -a" may fail, and you have to use "quilt pop -f" or
# "quilt pop -a -f".
#
quilt pop -a

git reset --hard ${GIT_HEAD:-HEAD}

( cd patches && svn update -r${SVN_REV:-HEAD}; )

quilt push -a
make ARCH=arm CROSS_COMPILE=arm-angstrom-linux-gnueabi- clean
make ARCH=arm CROSS_COMPILE=arm-angstrom-linux-gnueabi- u-boot.udfu
