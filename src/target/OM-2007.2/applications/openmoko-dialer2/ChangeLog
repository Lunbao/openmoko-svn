2007-12-19  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-sms.c: (moko_sms_dispose),
	(stop_notify_timeout), (update_notification), (moko_sms_init):
	Add tone/vibration notification

2007-12-19  Chris Lord  <chris@openedhand.com>

	* configure.ac:
	Add AC_GNU_SOURCE for basename(), add libnotify

	* src/phone-kit/Makefile.am:
	Add libnotify

	* src/phone-kit/dialer-main.c: (main):
	Initialise libnotify

	* src/phone-kit/moko-dialer.c: (moko_dialer_init):
	Use moko_notify_get_default()

	* src/phone-kit/moko-notify.c: (moko_notify_start),
	(moko_notify_stop), (moko_notify_init), (moko_notify_get_default):
	* src/phone-kit/moko-notify.h:
	Add moko_notify_get_default() to share MokoNotify with other objects

	* src/phone-kit/moko-sms.c: (update_notification), (note_added_cb),
	(note_modified_cb), (note_removed_cb), (sms_store_opened_cb),
	(moko_sms_init):
	Add notifications with libnotify

2007-12-04  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-network.c: (on_network_registered),
	(phone_msghandler), (connection_source_dispatch),
	(network_init_gsmd):

	Fix bug 1028 (PIN dialog appears multiple times) by using the pin and
	phone power callback messages.

2007-12-04  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-pin.c:
	* src/phone-kit/moko-pin.h:

	Add error message function

2007-11-30  Chris Lord  <chris@openedhand.com>

	* src/dialer/dialer-main.c: (main):
	Change object path/interface name to match re-factoring

	* src/phone-kit/Makefile.am:
	* src/phone-kit/dialer-main.c: (_dial_number), (main):
	* src/phone-kit/moko-dialer-dbus.xml:
	* src/phone-kit/moko-dialer-mcc-dc.h:
	* src/phone-kit/moko-dialer.[ch]:
	* src/phone-kit/moko-listener.[ch]:
	* src/phone-kit/moko-network-dbus.xml:
	* src/phone-kit/moko-network.[ch]:
	* src/phone-kit/moko-sms-dbus.xml:
	* src/phone-kit/moko-sms.[ch]:
	Re-factor into three separate objects for Network, Dialer and SMS
	interaction that share a common gsmd connection

2007-11-28  Thomas Wood  <thomas@openedhand.com>

	* data/Makefile.am:
	* src/phone-kit/dialer-main.c: (main):
	* src/phone-kit/moko-talking.c: (moko_talking_init):

	MokoStock seems to be unreliable, so include and load images ourselves
	for now

2007-11-28  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (dialer_init_gsmd):
	- Add back PIN handler registration
	- Correct error handling from lgsm_phone_power

2007-11-28  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (dialer_init_gsmd): Connect gsmd handlers
	before setting phone power

2007-11-27  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (pb_msghandler):

	Fix for change in gsmd api: GSMD_PHONEBOOK_GET_IMSI -> GSMD_PHONE_GET_IMSI

2007-11-26  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-mcc-dc.h:
	Replace "+1-" with "+1"

	* src/phone-kit/moko-dialer.c: (on_network_registered),
	(start_handling_sms), (net_msghandler), (pb_msghandler),
	(sms_store_opened_cb), (dialer_init_gsmd),
	(moko_dialer_check_gsmd), (moko_dialer_send_sms):
	Try to resolve local numbers (numbers beginning in '0'), make gsmd
	requests in more reliable places, be a bit better with failures (all to
	do with SMS code)

	* src/phone-kit/moko-dialer.h:
	Remove error code PK_DIALER_ERROR_NO_TOOLONG, add error code
	PK_DIALER_ERROR_INVALID_NUMBER

2007-11-23  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/Makefile.am:
	* src/phone-kit/moko-dialer-mcc-dc.h:
	Add a header with mappings from MCC to dialing codes

	* src/phone-kit/moko-dialer-dbus.xml:
	* src/phone-kit/moko-dialer.c: (on_network_registered),
	(moko_dialer_finalize), (net_msghandler), (pb_msghandler),
	(dialer_init_gsmd), (moko_dialer_check_gsmd),
	(moko_dialer_check_registration), (moko_dialer_cc_from_mcc),
	(moko_dialer_send_sms), (moko_dialer_get_provider_name),
	(moko_dialer_get_subscriber_number),
	(moko_dialer_get_country_code),
	(moko_dialer_get_home_country_code):
	* src/phone-kit/moko-dialer.h:
	Add new methods to get current country code, home country code,
	provider name and subscriber number

2007-11-23  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_dial),
	(moko_dialer_init):
	Fix direction field of log entry when dialing calls (outgoing)

	* src/phone-kit/moko-talking.c:
	* src/phone-kit/moko-talking.h:
	Remove moko-journal requirement

2007-11-23  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-talking.c: (moko_talking_set_clip),
	(incoming_timeout), (moko_talking_incoming_call),
	(outgoing_timeout), (moko_talking_outgoing_call),
	(on_pad_user_input), (moko_talking_init):

	Reset "talking" UI on new call

2007-11-23  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (on_pin_requested): Send registration
	request one second after sending pin

2007-11-23  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_rejected):
	* src/phone-kit/moko-talking.c: (moko_talking_class_init),
	(window_delete_event_cb), (on_pad_user_input), (moko_talking_init):
	* src/phone-kit/moko-talking.h:

	Add DTMF pad while in call

2007-11-22  Chris Lord  <chris@openedhand.com>

	* configure.ac:
	Replace libmokogsmd2 with libgsmd

	* src/dialer/moko-history.c:
	Remove unnecessary include

2007-11-22  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/Makefile.am:
	* src/phone-kit/dialer-main.c: (main):
	* src/phone-kit/moko-dialer-dbus.xml:
	* src/phone-kit/moko-dialer-sms-dbus.xml:
	* src/phone-kit/moko-dialer-sms.c:
	* src/phone-kit/moko-dialer-sms.h:
	* src/phone-kit/moko-dialer.c: (moko_dialer_dial),
	(moko_dialer_hang_up), (moko_dialer_hung_up),
	(moko_dialer_rejected), (on_talking_accept_call),
	(on_talking_reject_call), (on_talking_cancel_call),
	(on_network_registered), (on_incoming_call), (on_incoming_clip),
	(on_pin_requested), (on_call_progress_changed),
	(moko_dialer_dispose), (moko_dialer_finalize),
	(status_report_added_cb), (status_report_progress_cb), (store_sms),
	(gsmd_eventhandler), (sms_msghandler), (net_msghandler),
	(connection_source_prepare), (connection_source_check),
	(connection_source_dispatch), (sms_store_opened_cb),
	(dialer_init_gsmd), (moko_dialer_init), (moko_dialer_send_sms):
	* src/phone-kit/moko-dialer.h:
	Remove use of libmokogsmd, integrate SMS code with the rest of the
	dialer code

2007-11-21  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/Makefile.am:
	* src/phone-kit/moko-dialer.c: (on_incoming_call),
	(on_pin_requested), (moko_dialer_init):
	* src/phone-kit/moko-pin.c:
	* src/phone-kit/moko-pin.h:

	Add new code to request PIN from user

2007-11-21  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_finalize),
	(store_sms), (moko_dialer_sms_send):
	Fix compiler warnings, check the source exists before trying to 
	destroy it on finalize

2007-11-20  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_class_init):
	Don't forget to register introspection data

2007-11-20  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_send):
	* src/phone-kit/moko-dialer-sms.h:
	Return error message when trying to send an SMS after failing to 
	connect to gsmd

2007-11-20  Thomas Wood  <thomas@openedhand.com>

	* src/dialer/dialer-main.c: (dial_clicked_cb), (main): Use a message box
	to notify users of dialing errors

2007-11-20  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (opened_cb): Don't abort if
	connecting to gsmd fails

2007-11-20  Thomas Wood  <thomas@openedhand.com>

	* data/openmoko-dialer.desktop: Set single instance to true

2007-11-20  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_get_status),
	(moko_dialer_dial), (moko_dialer_class_init), (dialer_init_gsmd):
	* src/phone-kit/moko-dialer.h:

	- Return error messages when d-bus functions fail.
	- Try to re-connect to gsmd on each d-bus function rather than only on
	initialisation

2007-11-20  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_finalize),
	(store_sms), (gsmd_eventhandler), (sms_msghandler),
	(net_msghandler), (opened_cb), (moko_dialer_sms_send):
	Add more debugging, get own phone number correctly

2007-11-19  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (opened_cb), (moko_dialer_sms_init):
	Don't forget to open the note store before trying to do anything

2007-11-19  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_finalize),
	(connection_source_prepare), (connection_source_check),
	(connection_source_dispatch), (moko_dialer_sms_init):
	Don't forget to actually poll for events...

2007-11-19  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms.c: (status_report_added_cb),
	(store_sms), (gsmd_eventhandler), (sms_msghandler),
	(moko_dialer_sms_init):
	Handle non in-line SMS events, move all SMS's on SIM to journal on 
	startup, add lots of debugging statements

2007-11-14  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/moko-dialer-sms-dbus.xml:
	Remove signals, handled by the storage (jana/eds), return the UID of a
	sent message

	* src/phone-kit/moko-dialer-sms.c: (gsmd_eventhandler),
	(sms_msghandler), (moko_dialer_sms_init), (moko_dialer_sms_new),
	(moko_dialer_sms_get_default), (moko_dialer_sms_send):
	* src/phone-kit/moko-dialer-sms.h:
	Add status reports, sending confirmation and synchronisation with
	storage

2007-11-14  Chris Lord  <chris@openedhand.com>

	* src/phone-kit/dialer-main.c: (main):
	Register MokoDialerSMS object

	* src/phone-kit/moko-dialer-sms-dbus.xml:
	Remove 'ascii' parameter, autodetect instead

	* src/phone-kit/moko-dialer-sms.c: (gsmd_eventhandler),
	(moko_dialer_sms_init), (moko_dialer_sms_get_default),
	(moko_dialer_sms_send):
	* src/phone-kit/moko-dialer-sms.h:
	Add SMS sending code

2007-11-13  Chris Lord  <chris@openedhand.com>

	* configure.ac:
	* src/phone-kit/Makefile.am:
	* src/phone-kit/moko-dialer-sms-dbus.xml:
	* src/phone-kit/moko-dialer-sms.c: (moko_dialer_sms_get_property),
	(moko_dialer_sms_set_property), (moko_dialer_sms_dispose),
	(moko_dialer_sms_finalize), (moko_dialer_sms_class_init),
	(gsmd_eventhandler), (moko_dialer_sms_init), (moko_dialer_sms_new),
	(moko_dialer_sms_send), (moko_dialer_sms_sending),
	(moko_dialer_sms_sent), (moko_dialer_sms_rejected):
	* src/phone-kit/moko-dialer-sms.h:
	Add beginnings of SMS part of phone-kit. May or may not work.

2007-11-12  Thomas Wood  <thomas@openedhand.com>

	* src/common/moko-contacts.c: (moko_contacts_get_photo),
	(moko_contacts_add_contact):
	* src/common/moko-dialer-panel.c: (moko_dialer_panel_pressed):
	* src/common/moko-dialer-textview.c:
	(moko_dialer_textview_set_color):
	* src/dialer/moko-keypad.c: (on_panel_user_input),
	(on_panel_user_hold):
	* src/dialer/moko-tips.c: (moko_tips_set_matches):

	Plug lots of memory leaks

2007-11-12  Thomas Wood  <thomas@openedhand.com>

	* src/common/moko-dialer-textview.c: (moko_dialer_textview_init),
	(moko_dialer_textview_set_color):
	* src/common/moko-dialer-textview.h:

	Remove cursor indicator and always add/remove characters from the end of
	the dialer display. Closes bug 940.

2007-11-12  Thomas Wood  <thomas@openedhand.com>

	Patch by: Milko Krachounov <exabyte@3mhz.net>

	* src/common/moko-dialer-panel.c: (moko_dialer_panel_hold_timeout),
	(moko_dialer_panel_pressed): Automatically free the allocated data
	structure when the timeout source is destroyed. Closes bug 1004.

2007-11-05  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_dial),
	(moko_dialer_init):
	- Remove any GTK+ dependencies
	- Actually dial the requested number

	* src/phone-kit/moko-talking.c: (moko_talking_incoming_call),
	(moko_talking_outgoing_call), (on_silence_clicked),
	(on_cancel_clicked), (moko_talking_class_init),
	(moko_talking_init):
	- Cancel or reject call if the main window is closed.
	- Hide the window when cancel and rejecting calls

2007-11-01  Thomas Wood  <thomas@openedhand.com>

	* src/dialer/dialer-main.c: (dial_clicked_cb), (main):
	 - Notify user if there was a problem connecting to dbus
	 - Switch to history page if dial activated with no number entered
	 - Clean up code

2007-11-01  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_class_init),
	(dialer_display_error), (moko_dialer_init): Reimplement dial out function

2007-11-01  Thomas Wood  <thomas@openedhand.com>

	* data/org.openmoko.Dialer.service.in: Update binary name

2007-11-01  Thomas Wood  <thomas@openedhand.com>

	* src/dialer/dialer-main.c: Use dbus service to initiate calls

2007-11-01  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-talking.c:
	Revert use of GdkPixbufSimpleAnim as it does not support looping

2007-10-31  Thomas Wood  <thomas@openedhand.com>

	* src/phone-kit/moko-talking.c: Replace manual animation functions with
	GdkPixbufSimpleAnim

2007-10-31  Thomas Wood  <thos@openedhand.com>

	* src/phone-kit/moko-dialer.c: (moko_dialer_hung_up),
	(moko_dialer_rejected), (on_talking_reject_call),
	(moko_dialer_init):
	* src/phone-kit/moko-talking.c: (moko_talking_incoming_call),
	(moko_talking_outgoing_call), (moko_talking_accepted_call),
	(on_answer_clicked), (on_reject_clicked),
	(moko_talking_class_init), (moko_talking_init):

	Present a window for incoming call notification

2007-10-31  Thomas Wood  <thomas@openedhand.com>

	* src/dialer/dialer-main.c: Added to repository

2007-10-31  Thomas Wood  <thomas@openedhand.com>

	* src/dialer/Makefile.am:
	* src/phone-kit/Makefile.am:

	Add missing Makefile.am files to repository

2007-10-31  Thomas Wood <thomas@openedhand.com>

	* configure.ac:
	* src/*:

	Begin seperation of dialer and phone management

2007-10-30  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (on_talking_reject_call): Stop ringing notification
	 if we reject an incoming call

2007-10-30  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	(on_keypad_pin_entry), (on_network_registered), (moko_dialer_init):
	Clean up registration code (don't assume gsmd is broken!)

2007-10-29	Michael Lauer <mickey@openmoko.org>

	* data/default_ringtone.ogg: REMOVED
	* data/Makefile.am: remove default_ringtone.ogg,
      we use pulseaudio to trigger the ringtone sample.

2007-10-26  Thomas Wood  <thomas@openedhand.com>

	* src/moko-talking.c: (moko_talking_init): Don't use
	gtk_widget_set_no_show_all ()

2007-10-19  Thomas Wood  <thomas@openedhand.com>

	* src/moko-talking.c: (moko_talking_incoming_call),
	(moko_talking_outgoing_call), (moko_talking_accepted_call): Use
	show_all when showing the toolbars

2007-10-18  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-textview.c: (moko_dialer_textview_set_color): Don't
	try to format a blank string

2007-10-18  Thomas Wood  <thomas@openedhand.com>

	* src/moko-talking.c: (moko_talking_init): Use stock items for
	talking/incoming/outgoing page toolbars

2007-10-18  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-textview.c: (moko_dialer_textview_set_color): Use the
	pixel size of the text to calculate font level in the number display.

	Fixes bug 868 - Resizing of number display is wrong

2007-10-18  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	  (on_talking_accepted_call), (on_talking_reject_call),
	  (on_incoming_call), (on_call_progress_changed):
	  Set value of MokoJournal properties dtstart and dtend
	  to indicate begin and end of call. When call was rejected
	  or missed dtstart will has the same value as dtend.

	* src/moko-talking.c: (moko_talking_incoming_call),
	 (moko_talking_outgoing_call), (talking_timeout),
	 (moko_talking_accepted_call), (on_cancel_clicked),
	 (moko_init_tlking): Implemented displaying of call
	 duration.

	Closes bug 936 - Dialer doesn't display duration of call during call

2007-10-16  Daniel Willmann <alphaone@openmoko.org>

        * src/moko-sound.{c,h}: Add GSM speaker out sound profile

				* src/moko-dialer.c: (on_talking_speaker_toggle):
        * src/moko-talking.c: (on_speaker_toggled):
				Speaker button now toggles the GSM speaker out profile
				(requires recent alsa-state package)

2007-10-15  Thomas Wood  <thomas@openedhand.com>

	Based on patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked):Show dialed history when
	dialing empty number.
	* src/moko-history.c: (on_filter_changed): Select first item in history
	list after filter was changed.

2007-10-15  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-panel.c: (moko_dialer_panel_init),
	(moko_dialer_panel_pressed):

	Don't use -1 as a char value

2007-10-15  Thomas Wood  <thomas@openedhand.com>

	* configure.ac:
	* src/Makefile.am:

	Prevent CFLAGS from being obliterated

2007-10-12  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-textview.c: (moko_dialer_textview_delete): Make sure
	the last character is still bold after deleting

2007-10-12  Thomas Wood  <thomas@openedhand.com>

	* src/moko-keypad.c: Clear dialer display when delete button held down,
	rather than only when held and released

2007-10-12  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-panel.c: (moko_dialer_panel_init):
	* src/moko-keypad.c: (on_panel_user_hold):

	- Insert digits on "button down"
	- Replace primary digit with secondary digit when tap-and-hold occurs


2007-10-10  Thomas Wood  <thomas@openedhand.com>

	Based on patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-dialer.c: (on_incoming_call), (on_incoming_clip),
	  (on_call_progress_changed), (moko_dialer_init): Fix problem
	  with displaying CLIP on incoming call.

	* src/moko-talking.c: (moko_talking_set_clip): Display
	  "Unknown number" if number is NULL (CLIR).

2007-10-10  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* moko-keypad.c: (on_panel_user_input): Emit signal DIGIT_PRESSED
	  when keypad digit was pressed,

	* moko-dialer.c: (on_call_progress_changed): Check if status was
	  changed to TALKING when dialer received MOKO_GSMD_PROG_CONNECTED,
	  (on_keypad_digit_pressed): Implemented sending of DTMF tones
	  during active call. Fixes bug 53.

2007-10-06  Holger Hans Peter Freyther  <zecke@selfish.org>

	openmoko-dialer display isn't cleared after pin is sent
	 -http://bugzilla.openmoko.org/cgi-bin/bugzilla/show_bug.cgi?id=902

        * src/moko-keypad.c:
        (on_dial_clicked):
        (on_panel_user_input):

2007-10-04  Thomas Wood  <thomas@openedhand.com>

	* src/moko-keypad.c: (moko_keypad_init): Remove hard coded padding from
	keypad display

2007-10-04  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_add_contact): Fix a possible
	crasher

2007-10-04  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-contacts.c: (moko_contacts_fuzzy_lookup): Fix
	for a bug 802, (add_number): Fix accessing of digits array.

2007-10-04  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_init):
	* src/moko-keypad.c: (moko_keypad_set_display_text):

	Fix compiler warnings

2007-10-02  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-contacts.c: (moko_contacts_add_contact): Read phone number from
	VCARD.

2007-10-02  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-history.c: (moko_history_load_entries): History list wasn't
	corectly filled with moko journal entries,
	(on_delete_clicked), (history_add_entry): Function
	 moko_journal_remove_entry_by_uid need uid value instead of contact_uid,
	(history_add_entry): Replace phone number with name of contact if there 
	is a entry in addressbook. Display "Unknown number" if phone number is
	NULL.

2007-10-02  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked), (on_incoming_call),
	  (on_network_registered): Store network information (LocationAreaCode,
	  CellID) in moko journal.

2007-10-02  Thomas Wood  <thomas@openedhand.com>

	Patch by: Roman Moravcik <roman.moravcik@gmail.com>

	* src/moko-dialer.c: (moko_dialer_init):
	  Fix the loading of moko journal
	(on_talking_reject_call):
	  Write journal to storage after call is rejected
	(on_keypad_dial_clicked): Outgoing call had set wrong journal
	direction.

2007-10-02  Thomas Wood  <thomas@openedhand.com>

	* src/moko-keypad.c:
	* src/moko-keypad.h: Add moko_keypad_set_display_text()

2007-09-16	Michael Lauer <mickey@openmoko.org>

	* src/moko-notify.c: (moko_notify_start_ringtone): Play 'ringtone' sample.

2007-09-13  Thomas Wood  <thomas@openedhand.com>

	* src/dialer-main.c: (main): Delay gtk+/mokostock initialisation unless
	really required
	* src/moko-dialer-panel.c: (moko_dialer_panel_class_init): Remove some
	extra debug messages

2007-09-13  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked): Update status string
	* src/moko-keypad.c: (on_dial_clicked): Close bug 814 - Number is
	cleared when unable to dial

2007-09-13  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_lookup): Protect against empty
	number value. Should fix bug 819.

2007-09-09	Michael Lauer <mickey@openmoko.org>

	* src/moko-dialer.c: Fix typo and allow dialing when
	registration has been denied by the network (emergency calls)

2007-09-07  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_add_contact): Use fullname for
	contact display name

2007-09-07  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (moko_dialer_init):
	 - Prevent critical warnings if the journal cannot be loaded.
	 - Exit if we cannot connect to gsmd

2007-09-06  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer-textview.c: (moko_dialer_textview_init): Prevent the display
	from resizing when the font size is reduced

2007-09-06  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_add_contact),
	(on_ebook_contacts_changed), (on_ebook_contacts_removed):
	* src/moko-dialer-panel.c: (moko_dialer_panel_class_init):
	* src/moko-dialer.c: (on_keypad_pin_entry),
	(on_talking_speaker_toggle), (on_network_registered),
	(on_incoming_call), (on_incoming_clip), (on_pin_requested),
	(on_call_progress_changed), (register_network_cb),
	(moko_dialer_init):
	* src/moko-history.c: (history_add_entry),
	(moko_history_load_entries):
	* src/moko-keypad.c: (on_tip_selected), (on_panel_user_hold):
	* src/moko-notify.c: (moko_notify_check_brightness), (play),
	(play_timeout), (moko_notify_start_ringtone),
	(moko_notify_stop_ringtone):

	Use g_debug() rather than g_print()

2007-09-06  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked): Inform user if dialer is busy
	or network is not registered when attempting to dial

2007-09-06  Thomas Wood  <thomas@openedhand.com>

	* src/moko-dialer.c: (moko_dialer_class_init), (moko_dialer_init):
	- Add support for displaying GError messages
	- Handle new GError in moko_gsmd_connection_set_antenna_power ()

2007-08-31  Thomas Wood  <thomas@openedhand.com>

	* src/moko-contacts.c: (moko_contacts_get_photo): Check photo before
	g_object_ref. Should prevent segfault on the device when keying in a number
	that belongs to a contact.

2007-08-28  Neil Jagdish Patel  <njp@o-hand.com>

	Patch by: Rod Whitby <rod@whitby.id.au>
	* src/moko-dialer.c: (on_keypad_pin_entry),
	(on_network_registered), (register_network_cb), (moko_dialer_init):
	Ammend registering functions to respond correctly to the gsmd searching
	event.
	Change the initial timeout to connect to gsmd to 10 seconds, as gsmd takes
	longer than the orignal 5 seconds to start up.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_accept_call),
	(on_talking_reject_call), (on_call_progress_changed):
	Fixes journal crash on incoming calls.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	(on_talking_accept_call):
	Stop crashing on second outgoing call.
	Log incoming calls properly with the journal.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (moko_notify_start_ringtone):
	Check playing status before starting playback.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (play), (play_timeout),
	(moko_notify_start_ringtone), (moko_notify_stop_ringtone):
	Add some debugging stuff.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (play), (play_timeout),
	(moko_notify_start_ringtone), (moko_notify_stop_ringtone):
	Some ringtone fixes, so there is a gap between playback.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_accept_call), (on_incoming_call):
	Make sure we don't do anything on an incmong call if we have already
	accepted it.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_sound_finished),
	(moko_notify_start_ringtone):
	Remove debugging printf's as everything works!

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_sound_finished),
	(moko_notify_start_ringtone):
	Add some printf's. Change the sample name to one we know is working.

2007-08-23  Neil J. Patel  <njp@o-hand.com>

	* configure.ac:
	* src/dialer-main.c: (main):
	* src/moko-notify.c: (play_timeout), (on_sound_finished),
	(moko_notify_start_ringtone), (moko_notify_stop_ringtone),
	(moko_notify_start), (moko_notify_stop), (moko_notify_init):
	Switch ringtone backend to a simple PulseAudio set-up, as the gstreamer
	backend was causing lock-ups and messed up the timing of functions.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked):
	Check  uid is valid before adding to the journal object.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_call_progress_changed):
	* src/moko-history.c: (history_add_entry):
	Update for new Journal types.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_accept_call),
	(on_call_progress_changed):
	Set the 'talking' page when connected.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (moko_notify_start), (moko_notify_stop):
	Disable ringtone, as gstreamer seems to be taking an age doing anything
	useful, and at the same time, blocking the UI.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_accept_call):
	Fix ordering here as well.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_reject_call),
	(on_talking_cancel_call), (on_talking_silence):
	Make sure function ordering is correct so multiple tabs do not open.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered):
	Correctly format output.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_talking_silence), (moko_dialer_init):
	* src/moko-talking.c: (on_silence_clicked),
	(moko_talking_class_init), (moko_talking_init):
	* src/moko-talking.h:
	Add 'silence/ignore' capability to incoming calls i.e. stop the ringing and
	vibration, but don't hangup.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_fuzzy_lookup):
	* src/moko-notify.c: (moko_notify_check_brightness):
	Remove some unnecessary printf's.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (moko_notify_check_brightness):
	More notification fixes.

2007-08-22  Neil J. Patel  <njp@o-hand.com>
	
	* src/moko-notify.c: (moko_notify_check_brightness):
	Some fixes to the brightness manipulation.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_incoming_clip):
	* src/moko-notify.c: (moko_notify_check_brightness):
	Use the right device to set brightness.

2007-08-22  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_fuzzy_lookup),
	(moko_contacts_init):
	Properly initialise private variables.

	* src/moko-tips.c: (moko_tips_init):
	Don't load a default image.
	
2007-08-21  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (_dial_number), (main):
	* src/moko-dialer.c: (moko_dialer_dial):
	* src/moko-dialer.h:
	Fix bugs #649 (commandline option to dial)
	#456 (popup when pin requested).

2007-08-21  Neil J. Patel  <njp@o-hand.com>

	* src/moko-talking.c: (moko_talking_init):
	Fixed bug #730 (panel menu and 'hang up' are too close).

	* src/moko-tips.c: (moko_tips_set_matches):
	Check gdkpixbuf is valid before using it.

2007-08-21  Neil J. Patel  <njp@o-hand.com>

	* src/Makefile.am:
	* src/moko-contacts.c: (new_digit), (add_number),
	(moko_contacts_fuzzy_lookup), (moko_contacts_get_photo),
	(moko_contacts_add_contact), (free_digit),
	(moko_contacts_finalize), (moko_contacts_init):
	* src/moko-contacts.h:
	* src/moko-keypad.c: (on_tip_selected), (on_delete_event),
	(on_panel_user_input), (moko_keypad_init), (moko_keypad_new):
	* src/moko-tips.c: (moko_tips_set_matches), (on_tip_selected),
	(moko_tips_dispose), (moko_tips_finalize), (moko_tips_class_init),
	(moko_tips_init), (moko_tips_new):
	* src/moko-tips.h:
	Merge autocompletion work.
	Fix segfault while loading photo for contact.

2007-08-19  Daniel Willmann  <daniel@totalueberwachung.de>
	* src/moko-sound.{c,h}: Created functions to switch the audio profiles
	* src/Makefile.am, src/moko-talking.c: Switch audio profiles when
	accepting/initiating or cancelling a call

2007-08-16  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry),
	(on_network_registered):
	Remove some unused printf's, keep copy of PIN while interfacing with
	libgsmd.

	* src/moko-keypad.c: (on_dial_clicked):
	Clear the PIN once 'OK' is pressed.

2007-08-16  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered):
	Fix a typo.

	* src/moko-keypad.c: (on_panel_user_input):
	Make '#' the same as 'OK' when inputting a PIN (Bug #708)

2007-08-16  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered), (on_pin_requested):
	Be smarter when searching for a network, don't keep pinging gsmd.

2007-08-15  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered):
	Fix a typo.

2007-08-15  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered):
	Remove the registration timeout out on registration.

2007-08-15  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry),
	(on_network_registered), (moko_dialer_init):
	Check for registration type, and take the right action.

2007-08-15  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_network_registered):
	Print the type of registration information.

2007-08-14  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry), (moko_dialer_dispose):
	Reset variables for registration.
	Remove some old code.

2007-08-14  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry):
	Set the reg_request and registered variables as FALSE before requesting
	reg again.

2007-08-14  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry), (on_pin_requested):
	Set the correct UI options when the pin is requested.
	After sending the pin out, re-request registration.

2007-08-14  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (moko_notify_check_brightness):
	Set the brightness to highest when receiving a call.

2007-08-13  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_init):
	Warn when unable to load journal.

2007-08-13  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	(on_talking_accept_call), (on_incoming_call), (on_incoming_clip),
	(on_call_progress_changed), (moko_dialer_dispose),
	(moko_dialer_init):
	Check if moko_journal_load_from_storage () worked, otherwise don't create
	journal objects.

2007-08-10  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_pin_entry),
	(on_keypad_digit_pressed), (on_pin_requested), (moko_dialer_init):
	Set the keypad to 'pin mode' when a pin is requested.

	* src/moko-keypad.c: (_get_window), (moko_keypad_set_pin_mode),
	(on_dial_clicked), (on_delete_event), (moko_keypad_class_init),
	(moko_keypad_init):
	* src/moko-keypad.h:
	Implement a 'pin mode' for entering a pin.

2007-08-08  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer-panel.c: (moko_dialer_panel_init),
	(moko_dialer_panel_pressed):
	Implement tap-and-hold events for the keys, so you can enter w, + and p.

	* src/moko-keypad.c: (on_delete_event), (moko_keypad_init):
	Implement tap-and-hold for the delete button, so the holf event will cause
	the texview to 'empty'.

	* src/moko-notify.c:
	Some spacing fixes.

2007-08-07  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked):
	Make sure new entry's are written to the journal.

	* src/moko-notify.c: (moko_notify_check_brightness),
	(moko_notify_start):
	Check the LCD brightness, if it is under 5000, set it to 5000.

2007-08-07  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (main):
	* src/moko-dialer.c: (on_call_progress_changed),
	(moko_dialer_init):
	Make sure the dialer window hides on delete, instead of calling
	gtk_main_quit ().

	* src/moko-talking.c: (moko_talking_init):
	Fix the loading of the incmong and outgoing call images, so there is not a
	gap between them during animation.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_bus_eos), (moko_notify_start_ringtone):
	More loop deugging.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_bus_message):
	Connect to the right signals!

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_bus_message),
	(moko_notify_start_ringtone):
	Some more looping fixes.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (on_bin_eos), (moko_notify_start_ringtone):
	Added intial support for looping the ringtone.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-notify.c: (moko_notify_start_ringtone):
	Try and use the simple commandline gst parser.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* data/Makefile.am:
	Added a default ringtone (until sound themes are finished).

	* src/moko-notify.c: (on_filesrc_eos),
	(moko_notify_start_ringtone), (moko_notify_stop_ringtone),
	(moko_notify_start), (moko_notify_stop):
	Added some basic support for playing the default ringtone when there is an
	incoming call.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_call_progress_changed):
	* src/moko-notify.c: (moko_notify_start), (moko_notify_stop),
	(moko_notify_init):
	Added state support for notify object.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c:
	Fix typo.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_lookup):
	Check entry is valid before performing operations on it.

2007-08-06  Neil J. Patel  <njp@o-hand.com>

	* configure.ac:
	* src/Makefile.am:
	* src/dialer-main.c: (main):
	* src/moko-contacts.c: (moko_contacts_lookup):
	* src/moko-dialer.c: (moko_dialer_rejected),
	(on_talking_accept_call), (on_incoming_call), (on_incoming_clip),
	(register_network_cb), (moko_dialer_init):
	* src/moko-notify.c: (moko_notify_start_vibrate),
	(moko_notify_stop_vibrate), (moko_notify_start),
	(moko_notify_stop), (moko_notify_dispose), (moko_notify_finalize),
	(moko_notify_class_init), (moko_notify_init), (moko_notify_new):
	* src/moko-notify.h:
	Added a MokoNotify object, which will deal with user notification of 
	incoming calls.
	Implemented a simple vibration notifcation for incoming calls.

2007-08-03  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_lookup):
	Check entry is valid before performing operations on it.

	* src/moko-dialer.c: (on_incoming_clip), (moko_dialer_dispose):
	Make sure to write to the journal on dispose.

2007-08-03  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	(on_talking_accept_call), (on_talking_reject_call),
	(on_incoming_call), (on_incoming_clip), (on_call_progress_changed):
	Create MokoJournalEntry's for all events. 

2007-08-03  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_finalize):
	Free lists/structs properly.

2007-08-03  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_get_photo),
	(moko_contacts_lookup), (moko_contacts_add_contact),
	(moko_contacts_init):
	When searching for a contact, it it doesn't have a photo, look for it.
	
	* src/moko-dialer.c: (on_incoming_call), (on_incoming_clip),
	(register_network_cb):
	Set the incoming clip on the 'talking' widget.

	* src/moko-talking.c: (moko_talking_set_clip),
	(moko_talking_outgoing_call), (moko_talking_accepted_call):
	* src/moko-talking.h:
	Add a method to update the UI with an incomig clip.

2007-08-02  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_incoming_call), (on_pin_requested),
	(on_call_progress_changed):
	Correct the debugging statements, add more to the incoming code path.

2007-08-02  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_incoming_call):
	Double check for incoming status as new tabs keep appearing.

2007-08-02  Neil J. Patel  <njp@o-hand.com>

	* data/openmoko-dialer.desktop:
	Execute openmoko-dialer -s, so the dialer always shows.

2007-08-02  Thomas Wood  <thomas@openedhand.com>

	* src/Makefile.am: Stop being pedantic
	* src/moko-dialer-declares.h: Removed
	* src/moko-dialer-textview.c: (moko_dialer_textview_class_init),
	(moko_dialer_textview_init), (moko_dialer_textview_set_color),
	(moko_dialer_textview_insert):
	* src/moko-dialer-textview.h:

	- Add style properties for small, medium and large font sizes
	- Remove hardcoding of font sizes and colours


2007-08-02  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_incoming_call):
	Check if we have already set the incoming call status, otherwise each
	ring causes MokoGsmdConnection to emit a incoming call, and we keep 
	creating talking widgets.

2007-08-01  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_pin_requested),
	(on_call_progress_changed), (register_network_cb):
	More debugging.

2007-08-01  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_init):
	Init some variables properly.

2007-08-01  Neil J. Patel  <njp@o-hand.com>
	
	* src/moko-dialer.c: (register_network_cb):
	Added some more debug statements.

2007-07-31  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_call_progress_changed):
	Add a bunch of debug statements to find out what gsmd is doing.

2007-07-31  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked):
	Some fixes to dialing function.

2007-07-31  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (main):
	* src/moko-digit-button.c: (moko_digit_button_new_with_labels):
	Do not force gsmd restart (for debugging purposes).

2007-07-30  Thomas Wood  <thomas@openedhand.com>

	* src/dialer-main.c:
	* src/moko-dialer.c:
	* src/moko-history.c:
	* src/moko-history.h:
	* src/moko-keypad.c:
	* src/moko-talking.c:

	Fix includes not to use directory names

2007-07-30  Thomas Wood  <thomas@openedhand.com>

	* configure.ac: Update for OM 2007.2 library names

2007-07-27  Neil J. Patel  <njp@o-hand.com>

	* src/moko-history.c: (on_delete_clicked), (history_add_entry),
	(on_entry_added_cb), (moko_history_load_entries):
	Update to use the new mokojournal api.

2007-07-23  Neil J. Patel  <njp@o-hand.com>
	
	* src/dialer-main.c: (main):
	Instead of calling /etc/init.d/gpsd restart, do stop and then start, as 
	gpsd startup script calls killall gpsd (Duh!).

	* src/moko-dialer.c: (moko_dialer_hung_up),
	(on_keypad_dial_clicked), (on_talking_accept_call),
	(on_talking_reject_call), (on_talking_cancel_call),
	(on_pin_requested):
	* src/moko-talking.c: (moko_talking_init):
	Hide the delete/dial buttons when in a call.

2007-07-13  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-defines.h:
	Some global dialer variables.

2007-07-12  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_show_missed_calls),
	(on_keypad_dial_clicked), (on_talking_accept_call),
	(on_incoming_call):
	If there is a match from mokocontacts, pass that match into the outgoing
	call.
	
	* src/moko-talking.c: (incoming_timeout),
	(moko_talking_incoming_call), (outgoing_timeout),
	(moko_talking_outgoing_call), (talking_timeout),
	(moko_talking_accepted_call), (on_reject_clicked),
	(on_cancel_clicked), (moko_talking_init):
	* src/moko-talking.h:
	Add a MokoContactEntry variable into each function, allowing for contact 
	data to be displayed.
	Load the animation icons and display (animate) them for each status.

2007-07-12  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (main):
	Don't crash when dbus isn't present. Just return after printing the error.

	* src/moko-history.c: (moko_history_init):
	Use the blingy new moko-finger-scroll

2007-07-12  Neil J. Patel  <njp@o-hand.com>

	* src/Makefile.am:
	* src/moko-contacts.c: (moko_contacts_lookup),
	(moko_contacts_fuzzy_lookup), (normalize),
	(moko_contacts_add_contact), (on_ebook_contacts_added),
	(on_ebook_contacts_changed), (on_ebook_contacts_removed),
	(moko_contacts_init):
	* src/moko-contacts.h:
	Added simple contacts hashtable for looking up contacts.

	* src/moko-dialer.c: (moko_dialer_show_missed_calls),
	(on_keypad_dial_clicked), (moko_dialer_init):
	Added a test case for looking up contacts.

2007-07-10  Neil J. Patel  <njp@o-hand.com>

	* src/moko-contacts.c: (moko_contacts_add_contact),
	(on_ebook_contact_added), (moko_contacts_init),
	(moko_contacts_get_default):
	* src/moko-contacts.h:
	Create the EBook and populate the contacts and entries list.
	Connect to the 'contacts-added' signal and add new contacts to the list.

2007-07-09  Neil J. Patel  <njp@o-hand.com>

	* configure.ac:
	* src/Makefile.am:
	* src/moko-contacts.c: (moko_contacts_dispose),
	(moko_contacts_finalize), (moko_contacts_class_init),
	(moko_contacts_init), (moko_contacts_get_default):
	* src/moko-contacts.h:
	Added stubs for a contacts backend (for number matching and autocomplete)

2007-07-09  Neil J. Patel  <njp@o-hand.com>

	* configure.ac:
	Update to use the new split-out openmoko-libs

2007-07-09  Neil J. Patel  <njp@o-hand.com>

	* configure.ac:
	Added an option to sepcify the location of the dbus tools, using
	--with-dbusbindir=DIR.

2007-07-06  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (main):
	* src/moko-dialer.c: (moko_dialer_show_dialer),
	(moko_dialer_show_missed_calls), (moko_dialer_init):
	Don't show dialer unless -s is used.
	The dbus functions ShowDialer/ShowMissedCalls/DialerDial work now.

2007-07-06  Neil J. Patel  <njp@o-hand.com>

	* src/dialer-main.c: (main):
	Issue a "/etc/init.d/gsmd restart" before starting the dialer, to make sure
	we have a running gsmd. Yes its hacky, but its the only way gsmd will learn.

2007-07-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_outgoing_call),
	(moko_dialer_hung_up), (moko_dialer_rejected),
	(on_keypad_dial_clicked), (on_talking_accept_call),
	(on_talking_reject_call), (on_talking_cancel_call),
	(on_history_dial_number), (on_incoming_call), (on_incoming_clip),
	(on_call_progress_changed), (register_network_cb),
	(moko_dialer_init):
	* src/moko-dialer.h:
	Hooked up most of the Gsmd functions, apart from the PIN stuff.
	Changed the registering timeout to keep going until the dialer has
	registered, otherwise it will keep asked gsm to connect.
	
	* src/moko-keypad.c: (moko_keypad_set_talking), (moko_keypad_init):
	* src/moko-keypad.h:
	Added a state for when your in a call, which hides the 'delete' and 'dial'
	keys.

	* src/moko-talking.c: (on_speaker_toggled):
	Don't unnecessaryly emit a signal, for now.

2007-07-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_keypad_dial_clicked),
	(on_talking_accept_call), (on_talking_reject_call),
	(on_talking_cancel_call), (on_talking_speaker_toggle),
	(on_keypad_digit_pressed), (moko_dialer_init):
	Connected to the remaining signals from the main objects.

	* src/moko-keypad.c: (moko_keypad_class_init):
	* src/moko-keypad.h:
	Added a "digit_pressed" signal, which will be used for dtmf.

2007-07-06  Neil J. Patel  <njp@o-hand.com>

	* src/moko-history.c: (history_add_entry), (moko_history_init):
	Fixed bug where history entries were not showing.

2007-07-05  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_init):
	Added the talkign apge on _init () for testing.

	* src/moko-talking.c: (moko_talking_incoming_call),
	(moko_talking_outgoing_call), (moko_talking_accepted_call),
	(moko_talking_init):
	* src/moko-talking.h:
	Added the functions for changing the ui for the current status.

2007-07-05  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (moko_dialer_init):
	Updated for new moko_talking_new signature.

	* src/moko-talking.c: (on_answer_clicked), (on_reject_clicked),
	(on_cancel_clicked), (on_speaker_toggled),
	(moko_talking_class_init), (moko_talking_init), (moko_talking_new):
	* src/moko-talking.h:
	Added the skeleton for the integrated talking/incoming/outgoing widgets.
	Added the signals and callbacks for the MokoDialer application to connect
	to.
	
2007-07-05  Neil J. Patel  <njp@o-hand.com>

	* src/moko-history.c: (on_delete_clicked):
	Implemented the 'delete' action.

2007-07-04  Neil J. Patel  <njp@o-hand.com>

	* src/moko-dialer.c: (on_history_dial_number), (moko_dialer_init):
	Connect to new "dial_number" signal in MokoHistory

	* src/moko-history.c: (on_dial_clicked), (moko_history_class_init):
	* src/moko-history.h:
	Add a "dial_number" signal to alert the MokoDialer object that the user
	wants to dial a number.

2007-07-04  Neil J. Patel  <njp@o-hand.com>

	* src/moko-history.c: (on_dial_clicked), (on_sms_clicked),
	(on_delete_clicked), (history_add_entry), (on_entry_added_cb),
	(moko_history_filter_visible_func), (on_filter_changed),
	(sort_by_date), (moko_history_load_entries), (moko_history_init):
	Added in nearly all of the remaining functionality of the history view, only
	dial/sms/delete buttons are not working.
	Swapped custom header for a combobox, added the toolbar at the top.

2007-07-04  Neil J. Patel  <njp@o-hand.com>

	* src/moko-history.c: (moko_history_init):
	Fixed icons in the toolbar.
	Added the rest of the filter options, with correct icons.

	* src/moko-history.h:
	Replaced OUTGOING/INCOMING with DIALED/RECEIVED to match with the text of
	the combobox.

2007-07-04  Neil J. Patel  <njp@o-hand.com>

	* src/Makefile.am:
	* src/moko-dialer.c: (moko_dialer_hang_up),
	(on_keypad_dial_clicked), (moko_dialer_init):
	* src/moko-history.c: (moko_history_load_entries),
	(moko_history_dispose), (moko_history_finalize),
	(moko_history_set_property), (moko_history_get_property),
	(moko_history_class_init), (moko_history_init), (moko_history_new):
	* src/moko-history.h:
	Started to convert history from old dialer.
	Added a toolbar, converted custom menu to GtkComboBox.

	* src/moko-talking.c: (moko_talking_dispose),
	(moko_talking_finalize), (moko_talking_class_init),
	(moko_talking_init), (moko_talking_new):
	* src/moko-talking.h:
	A stub for a talking tab.

2007-07-03  Neil J. Patel  <njp@o-hand.com>

	* src/Makefile.am:
	* src/moko-dialer-declares.h:
	* src/moko-dialer-panel.c: (moko_dialer_panel_class_init),
	(moko_dialer_panel_init), (moko_dialer_panel_pressed),
	(moko_dialer_panel_new):
	* src/moko-dialer-panel.h:
	* src/moko-dialer-textview.c: (moko_dialer_textview_class_init),
	(moko_dialer_textview_init), (moko_dialer_textview_new),
	(moko_dialer_textview_set_color), (moko_dialer_textview_insert),
	(moko_dialer_textview_get_input), (moko_dialer_textview_empty),
	(moko_dialer_textview_delete), (moko_dialer_textview_fill_it),
	(moko_dialer_textview_confirm_it):
	* src/moko-dialer-textview.h:
	* src/moko-digit-button.c: (moko_digit_button_new),
	(moko_digit_button_new_with_labels),
	(moko_digit_button_set_numbers), (moko_digit_button_class_init),
	(moko_digit_button_init), (moko_digit_button_get_left),
	(moko_digit_button_get_right):
	* src/moko-digit-button.h:
	* src/moko-keypad.c: (on_dial_clicked), (on_delete_clicked),
	(on_panel_user_input), (on_panel_user_hold), (moko_keypad_dispose),
	(moko_keypad_class_init), (moko_keypad_init), (moko_keypad_new):
	* src/moko-keypad.h:
	Added the MokoDigitButton, MokoDialerPanel and MokoDialerTextview classes
	from the orignal dialer, and added them into the new MokoKeypad object.

2007-07-03  Neil J. Patel  <njp@o-hand.com>

	* src/Makefile.am:
	* src/moko-dialer.c: (moko_dialer_dispose), (moko_dialer_init):
	Init the connection with gsmd through MokoGsmdConnection.
	Init MokoJournal. 
	Create the initial window (and present straight away for now).
	Create the notebook, and pack in the keypad.

	* src/moko-keypad.c: (moko_keypad_dispose), (moko_keypad_finalize),
	(moko_keypad_class_init), (moko_keypad_init), (moko_keypad_new):
	* src/moko-keypad.h:
	Added the beginiings of a keypad.

2007-07-03  Neil J. Patel  <njp@o-hand.com>

	* AUTHORS:
	* INSTALL:
	* Makefile.am:
	* README:
	* autogen.sh:
	* configure.ac:
	* data/Makefile.am:
	* data/openmoko-dialer.desktop:
	* data/org.openmoko.Dialer.service.in:
	* src/Makefile.am:
	* src/dialer-main.c: (_show_dialer), (_show_missed), (main):
	* src/moko-dialer-dbus.xml:
	* src/moko-dialer-glue.h:
	* src/moko-dialer.c: (moko_dialer_show_dialer),
	(moko_dialer_show_missed_calls), (moko_dialer_get_status),
	(moko_dialer_dial), (moko_dialer_hang_up),
	(moko_dialer_outgoing_call), (moko_dialer_talking),
	(moko_dialer_hung_up), (moko_dialer_rejected),
	(on_network_registered), (on_incoming_call), (on_pin_requested),
	(on_call_progress_changed), (register_network_cb),
	(moko_dialer_dispose), (moko_dialer_finalize),
	(moko_dialer_class_init), (moko_dialer_init),
	(moko_dialer_get_default):
	* src/moko-dialer.h:
	Intial Import

/* vi: set noexpandtab sw=8 sts=8 ts=8: */
