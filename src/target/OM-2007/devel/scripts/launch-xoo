#!/bin/bash
#
# Dependencies:
# - Xephyr (xorg)
# - xoo (ohand svn)
# - matchbox-panel (ohand svn)
# - matchbox-window-manager (ohand svn)
#
SERVER=Xephyr
#SERVER=Xnest
SVN_TRUNK=/local/pkg/openmoko/
export PATH=$SVN_TRUNK/OM-2007/bin:$PATH
export LD_LIBRARY_PATH=$SVN_TRUNK/OM-2007/lib:/usr/local/lib

xoo -xo '-dpi 104 -ac' -xd :1 -xn `which $SERVER` -t 'OpenMoko running on FIC GTA01' -d \
$SVN_TRUNK/oe/packages/xoo/files/gta01.xml &

sleep 2

export DISPLAY=:1

matchbox-panel -display $DISPLAY \
               --id 1 \
               --orientation north \
               --default-apps '' \
               --no-session \
               --no-menu \
               --no-flip \
               --bgpixmap $SVN_TRUNK/OM-2007/artwork/images/pixmaps/openmoko-header-background.png &

matchbox-panel -display $DISPLAY \
               --id 2 \
               --orientation south \
               --default-apps '' \
               --no-session \
               --no-menu \
               --no-flip \
               --bgpixmap $SVN_TRUNK/OM-2007/artwork/images/pixmaps/openmoko-footer-background.png &

matchbox-desktop --icon-size 100 \
                 --icon-padding 60 \
                 --font sans-16 \
                 --titlefont sans-20:bold --bg \
img-tiled:/local/pkg/openmoko/OM-2007/artwork/themes/openmoko-standard/gtk-2.0/mokopanedwindow-upper-enclosing.png &

exec matchbox-window-manager -display $DISPLAY \
                        -use_titlebar no \
                        -use_super_modal yes \
                        -use_lowlight yes \
                        -use_dialog_mode static \
                        -use_cursor yes
