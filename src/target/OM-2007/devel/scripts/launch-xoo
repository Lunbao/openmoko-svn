#!/bin/bash
#
# Dependencies:
# - Xephyr (xorg)
# - xoo (ohand svn)
# - matchbox-panel (ohand svn)
# - matchbox-window-manager (ohand svn)
#
SERVER=Xephyr
#SERVER=Xnest
export PATH=$OPENMOKODIR/bin:$PATH
export LD_LIBRARY_PATH=$OPENMOKODIR/lib:/usr/local/lib

xoo -xo '-dpi 104 -ac' -xd :1 -xn `which $SERVER` -t 'OpenMoko running on FIC GTA01' -d \
$OEDIR/packages/xoo/files/gta01.xml &

sleep 2

export DISPLAY=:1

matchbox-window-manager -display $DISPLAY \
                        -use_titlebar no \
                        -use_super_modal yes \
                        -use_lowlight yes \
                        -use_dialog_mode static \
                        -use_cursor yes &

sleep 2

matchbox-desktop --icon-size 100 \
                 --icon-padding 60 \
                 --font sans-16 \
                 --titlefont sans-20:bold --bg \
img-tiled:$OPENMOKODIR/artwork/themes/openmoko-standard/gtk-2.0/mokopanedwindow-upper-enclosing.png &

sleep 2

matchbox-panel --geometry=480x44 \
  --start-applets=openmoko-panel-mainmenu,systray \
  --end-applets=openmoko-panel-battery,openmoko-panel-gsm,openmoko-panel-gps,openmoko-panel-clock &

sleep 2

openmoko-footer &
