This patch adds driver support for the FIC GTA01 vibrator device.  The driver
uses the existing LED class driver framework, since there's a lot of
similarity between the LED and the vibrator function.

Index: linux-2.6.17.14-fic4.test/drivers/leds/leds-gta01.c
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ linux-2.6.17.14-fic4.test/drivers/leds/leds-gta01.c	2007-01-08 22:51:15.000000000 +0100
@@ -0,0 +1,95 @@
+/*
+ * LED driver for the FIC GTA01 (Neo1973) GSM Phone
+ *
+ * (C) 2006 by OpenMoko, Inc.
+ * Author: Harald Welte <laforge@openmoko.org>
+ * All rights reserved.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ */
+
+#include <linux/config.h>
+#include <linux/kernel.h>
+#include <linux/init.h>
+#include <linux/platform_device.h>
+#include <linux/leds.h>
+#include <asm/hardware/scoop.h>
+#include <asm/mach-types.h>
+#include <asm/arch/hardware.h>
+#include <asm/arch/gta01.h>
+
+static void gta01led_vib_set(struct led_classdev *led_cdev, enum led_brightness value)
+{
+	if (value)
+		s3c2410_gpio_setpin(GTA01_GPIO_VIBRATOR_ON, 1);
+	else
+		s3c2410_gpio_setpin(GTA01_GPIO_VIBRATOR_ON, 0);
+}
+
+static struct led_classdev gta01_vib_led = {
+	.name			= "gta01:vibrator",
+	.brightness_set		= gta01led_vib_set,
+};
+
+#ifdef CONFIG_PM
+static int gta01led_suspend(struct platform_device *dev, pm_message_t state)
+{
+	led_classdev_suspend(&gta01_vib_led);
+	return 0;
+}
+
+static int gta01led_resume(struct platform_device *dev)
+{
+	led_classdev_resume(&gta01_vib_led);
+	return 0;
+}
+#endif
+
+static int gta01led_probe(struct platform_device *pdev)
+{
+	int ret;
+
+	if (!machine_is_gta01())
+		return -EIO;
+
+	return led_classdev_register(&pdev->dev, &gta01_vib_led);
+}
+
+static int gta01led_remove(struct platform_device *pdev)
+{
+	led_classdev_unregister(&gta01_vib_led);
+
+	return 0;
+}
+
+static struct platform_driver gta01led_driver = {
+	.probe		= gta01led_probe,
+	.remove		= gta01led_remove,
+#ifdef CONFIG_PM
+	.suspend	= gta01led_suspend,
+	.resume		= gta01led_resume,
+#endif
+	.driver		= {
+		.name		= "gta01-led",
+	},
+};
+
+static int __init spitzled_init(void)
+{
+	return platform_driver_register(&gta01led_driver);
+}
+
+static void __exit spitzled_exit(void)
+{
+ 	platform_driver_unregister(&gta01led_driver);
+}
+
+module_init(spitzled_init);
+module_exit(spitzled_exit);
+
+MODULE_AUTHOR("Harald Welte <laforge@openmoko.org>");
+MODULE_DESCRIPTION("FIC GTA01 LED driver");
+MODULE_LICENSE("GPL");
